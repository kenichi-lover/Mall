{% extends 'base.html' %}
{% load static %}
{% block title %}悖论编码局{% endblock %}

{% block extra_head %}
<style>
    body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        color: #333;
        background-color: #fff;
    }



    .origin-item {
        margin-bottom: 0;
    }

    .image-container {
        width: 100%;
        height: 65vh;
        /* 图片容器高度，可按需调整 */
        overflow: hidden;
        background-color: #e0e0e0;
        /* 图片加载时或使用 object-fit: contain 时的背景 */
    }

    .origin-image {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
        /* 关键：图片填满容器，可能裁剪。改为 'contain' 则完整显示图片但可能留白。 */
        object-position: center;
        transition: opacity 0.1s ease-out;
        /* 让透明度变化更平滑一点 */
    }

    .origin-text-content-wrapper {
        background-color: #ffffff;
        /* <<--- 文本区域背景色 */
        /* 你可以在这里修改为你想要的颜色，例如: background-color: #f8f8f8; */
        padding: 60px 20px;
    }

    .origin-text-container {
        max-width: 760px;
        margin: 0 auto;
        text-align: left;
        font-family: Georgia, "Times New Roman", Times, serif;
        font-size: 1.1rem;
        line-height: 1.7;
        color: #3a3a3a;
    }

    .origin-title {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-size: 2.6em;
        font-weight: normal;
        text-transform: uppercase;
        letter-spacing: .03em;
        text-align: center;
        color: #1c1c1c;
        margin-bottom: 35px;
        padding-top: 10px;
    }

    .origin-text p {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        font-size: 1rem;
        line-height: 1.65;
        margin-bottom: 1.3em;
    }

    .origin-text p:last-child {
        margin-bottom: 0;
    }

    .origin-text strong {
        font-weight: bold;
        color: #111;
    }

    .origin-text h3 {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        font-size: 0.95em;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        margin-top: 40px;
        margin-bottom: 15px;
        color: #222;
        padding-bottom: 8px;
        border-bottom: 1px solid #eaeaea;
    }

    .origin-text h3:first-of-type {
        margin-top: 30px;
    }

    @media (max-width: 768px) {
        .image-container {
            height: 50vh;
        }

        .origin-text-content-wrapper {
            padding: 40px 15px;
        }

        .origin-title {
            font-size: 2em;
        }

        .origin-text-container {
            font-size: 1rem;
        }

        .origin-text p {
            font-size: 0.9rem;
        }

        .origin-text h3 {
            font-size: 0.9em;
        }
    }

    .breadcrumb-section {
        max-width: 760px; /* 限制面包屑容器的最大宽度，与内容区域对齐 */
        margin: 20px auto; /* 设置上下外边距为 20px，左右自动居中 */
        padding: 0 15px; /* 建议添加左右内边距，防止在小屏幕上内容贴边 */
        box-sizing: border-box; /* 确保 padding 不会增加元素的总宽度超过 max-width */
    }

    /* 使面包屑列表项在容器内部居中 */
    .breadcrumb-section .breadcrumb {
         justify-content: center; /* Bootstrap 的 .breadcrumb 是 flex 容器，这个属性使其子项（li）水平居中 */
         /* 移除 Bootstrap 默认可能带的底部外边距，如果你希望它和下面的内容紧密 */
         /* margin-bottom: 0; */
    }
</style>
{% endblock %}


{% block content %}
<div class="origin-section">
    <div class="origin-item">
        <div class="image-container">
            <img src="{% static 'images/6969.jpg' %}" alt="量子实验室·时间循环危机" class="origin-image" data-scroll-opacity>
        </div>
        <div class="origin-text-content-wrapper">
            <div class="origin-text-container">
                <div class="origin-title">量子实验室·时间循环危机</div>
                <div class="origin-text">
                    <p><strong>主题：</strong>科幻烧脑 | 粒子实验事故</p>
                    <p><strong>背景：</strong></p>
                    <p>2080年，你们是误入尖端“量子实验室”的记者，意外触发粒子加速器故障，被困在时间循环中。每30分钟场景会重置，所有线索重新洗牌，只有破解四维空间的“弦理论方程”才能终止程序！</p>
                    <h3>核心谜题：</h3>
                    <p><strong>生死密码盘：</strong>实验室墙上投影的“虚数公式”需结合显微镜下的硅基芯片裂痕纹路，破解四位密码。</p>
                    <p><strong>薛定谔的猫箱：</strong>铁笼内有一只假猫，笼顶刻有“粒子叠加态”符号，需调整磁极方向使其同时处于开/关状态获取钥匙。</p>
                    <p><strong>时间线悖论：</strong>倒计时15分钟后，房间角落出现少年版爱因斯坦的全息影像，用摩斯电码提问：“光的本质是波还是粒子？”答错则所有灯光熄灭10秒。</p>
                    <h3>致命陷阱：</h3>
                    <p>若用暴力砸碎实验室玻璃，警报会启动，倒计时加速至5分钟；</p>
                    <p>忽略循环规律重复使用同一线索，房间温度每秒升高1℃。</p>
                    <h3>结局分支：</h3>
                    <p><strong>逃脱成功：</strong>破解“量子纠缠方程式”，粒子流形成虫洞出口，实验室爆炸前逃离；</p>
                    <p><strong>失败彩蛋：</strong>重置第9次时，玩家发现自己的影子逐渐透明——已被困在时间缝隙中</p>
                </div>
            </div>
        </div>
    </div>

    <div class="origin-item">
        <div class="image-container">
            <img src="{% static 'images/6970.jpg' %}" alt="古墓幽灵·千年黄肠题凑" class="origin-image" data-scroll-opacity>
        </div>
        <div class="origin-text-content-wrapper">
            <div class="origin-text-container">
                <div class="origin-title">古墓幽灵·千年黄肠题凑</div>
                <div class="origin-text">
                    <p><strong>主题：</strong>历史探险 | 汉代帝王陵墓</p>
                    <p><strong>背景：</strong></p>
                    <p>你们是一支考古小队，深入汉代诸侯王的“黄肠题凑”墓室，触发了棺椁下的机关，墓道石门封锁，墓壁上浮现血字：“擅闯者，以魂饲灯！”</p>
                    <h3>核心谜题：</h3>
                    <p><strong>星象锁：</strong>穹顶壁画隐藏北斗七星与二十八宿对应坐标，需转动墓室四角青铜朱雀首至特定角度。</p>
                    <p><strong>活人俑谜阵：</strong>甬道内九尊陶俑手持不同兵器，按《史记·刺客列传》中荆轲刺秦王的兵器顺序排列触发暗门。</p>
                    <p><strong>尸解仙诅咒：</strong>主墓室丹炉内发现竹简，需用紫外线灯照射显形道家符咒，倒序拼出“魂归厚土”密文。</p>
                    <h3>致命陷阱：</h3>
                    <p>误触陶俑脚下的地砖，顶部暗弩连发三箭；</p>
                    <p>超时1小时后，角落长明灯火苗变绿，释放致幻气体。</p>
                    <h3>结局分支：</h3>
                    <p><strong>逃脱成功：</strong>解开丹炉内的“尸解仙秘术”，棺椁底板打开，通往陪葬坑的盗洞浮现；</p>
                    <p><strong>失败彩蛋：</strong>墓壁渗出黑水，玩家手腕出现“鬼面疮”，耳边响起幽幽楚歌：“魂兮归来…”</p>
                </div>
            </div>
        </div>
    </div>

    <div class="origin-item">
        <div class="image-container">
            <img src="{% static 'images/6971.jpg' %}" alt="时光照相馆·被遗忘的底片" class="origin-image" data-scroll-opacity>
        </div>
        <div class="origin-text-content-wrapper">
            <div class="origin-text-container">
                <div class="origin-title">时光照相馆·被遗忘的底片</div>
                <div class="origin-text">
                    <p><strong>主题：</strong>温情悬疑 | 平行时空交织</p>
                    <p><strong>背景：</strong></p>
                    <p>1950年代老照相馆深夜诡异营业，你们受神秘委托来取照片，却发现橱窗里的合影中所有人都没有脸。老板留下一封信：“找回被偷走的时光，否则你们将永远留在相片里！”</p>
                    <h3>核心谜题：</h3>
                    <p><strong>幽灵暗房：</strong>红色安全灯下显影池浮现倒影，需用老式打字机打出相中人名字（镜像文字需破译）；</p>
                    <p><strong>记忆胶片：</strong>播放8mm电影机片段，发现背景中一闪而过的怀表时间（11:55）与座钟齿轮联动；</p>
                    <p><strong>平行时空门：</strong>拼合不同年代客人的残破照片（1937年旗袍女子+2003年滑板少年），触发暗柜里的磁带走失录音。</p>
                    <h3>致命陷阱：</h3>
                    <p>若强行撕开相册封页，照片中的人物会流泪，房间湿度暴涨引发胶片粘连；</p>
                    <p>错误使用闪光灯，橱窗玻璃映出玩家身影逐渐褪色。</p>
                    <h3>结局分支：</h3>
                    <p><strong>逃脱成功：</strong>用老式留声机播放《夜来香》，相框后浮现铜钥匙，打开阁楼铁盒归还“时间核心”；</p>
                    <p><strong>失败彩蛋：</strong>所有照片突然清晰，玩家发现自己成为橱窗中新合影的一员，窗外街道变成黑白默片</p>
                </div>
            </div>
        </div>
    </div>
    <nav aria-label="breadcrumb" class="breadcrumb-section"> {# 添加一个 class 方便样式控制 #}
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">悖论编码局</li>
        </ol>
    </nav>
</div>


{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const imagesToFade = document.querySelectorAll('.origin-image[data-scroll-opacity]');
        const windowHeight = window.innerHeight;

        if (imagesToFade.length === 0) {
            // console.log("No images found with data-scroll-opacity attribute.");
            return;
        }

        function handleScroll() {
            imagesToFade.forEach(image => {
                const imageRect = image.getBoundingClientRect();
                // 计算图片中心相对于视口顶部的距离
                const imageCenterRelativeToViewport = imageRect.top + imageRect.height / 2;
                // 视口中心点
                const viewportCenter = windowHeight / 2;

                // 图片中心与视口中心的距离
                const distance = Math.abs(imageCenterRelativeToViewport - viewportCenter);

                // 定义图片开始完全淡出（变为最小透明度）的阈值距离
                // 当图片中心距离视口中心达到此距离时，透明度为最小 (0.2)
                // 当图片中心与视口中心重合 (distance = 0) 时，透明度为最大 (1.0)
                // 这里设置阈值为视口高度的一半，意味着图片中心到达视口边缘时，基本达到最小透明度
                const fadeOutThreshold = windowHeight / 2;

                let calculatedOpacity = 1 - (distance / fadeOutThreshold);

                // 确保透明度在 0.2 到 1.0 之间
                image.style.opacity = Math.max(0.2, Math.min(1, calculatedOpacity));
            });
        }

        window.addEventListener('scroll', handleScroll, { passive: true }); // 使用 passive listener 提高滚动性能
        handleScroll(); // 页面加载时执行一次，确保初始状态正确
    });
</script>
{% endblock %}